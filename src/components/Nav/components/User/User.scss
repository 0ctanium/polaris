@import '../../variables';

$avatar-size: rem(32px);
$message-min-height: rem(40px);
$message-vertical-padding: ($message-min-height - line-height(body)) / 2;
$stacking-order: (
  userlist: 10,
  userbutton: 20,
);

.User {
  position: relative;
  flex: 0 0 auto;
  width: 100%;
  box-shadow: shadow();

  @include breakpoint-after(nav-min-window-corrected()) {
    display: none;
  }
}

.Button {
  @include unstyled-button;
  z-index: z-index(userbutton, $stacking-order);
  display: flex;
  flex-shrink: 0;
  align-items: center;
  width: 100%;
  padding: spacing();
  background-color: color('white');
  color: color('ink');
  text-align: left;

  &:focus {
    background-color: color('sky');
    outline: none;
  }
}

.Avatar {
  margin-right: spacing(tight);
}

.Details {
  display: block;
  flex: 1 1 auto;
  max-width: calc(
    100% - #{spacing(tight)} - #{$avatar-size} - #{nav(icon-size)}
  );
  padding-right: spacing(tight);
}

.Name {
  @include truncate;
  display: block;
  font-size: font-size(heading);
}

.Detail {
  @include truncate;
  @include text-emphasis-subdued;
  display: block;
  font-size: font-size(body);
}

.List {
  position: absolute;
  z-index: z-index(userlist, $stacking-order);
  top: calc(100% - 1px);
  right: 0;
  left: 0;
  margin: 0;
  padding-bottom: spacing(tight);
  transform: translateY(-10%);
  opacity: 0;
  pointer-events: none;
  background-color: color('white');
  box-shadow: shadow();
  will-change: transform, opacity;
  transition: transform duration() easing(), opacity duration() easing();

  .expanded & {
    transform: translateY(0);
    opacity: 1;
    pointer-events: initial;
  }
}

.Icon {
  @include recolor-icon(color('ink', 'lightest'));
  margin-right: spacing(tight);
}

.Item {
  @include unstyled-button;
  display: flex;
  align-items: center;
  width: 100%;
  padding: spacing(tight) spacing(loose);
  font-size: font-size(body);
  color: color('ink');
  text-decoration: none;
  cursor: pointer;

  &:focus,
  &:hover,
  &:active {
    outline: none;
    text-decoration: none;
    background-color: color('indigo');
    color: color('white');

    .Icon {
      @include recolor-icon(color('white'));
    }
  }
}

.Section + .Section {
  position: relative;
  margin-top: spacing();

  &::before {
    content: '';
    position: absolute;
    top: spacing(tight) * -1;
    display: block;
    width: 100%;
    height: 1px;
    background-color: color('sky');
  }
}

.DisclosureIcon {
  align-self: center;
  height: nav(icon-size);
  will-change: transform;
  transition: transform duration() easing();

  .expanded & {
    transform: rotate(180deg);
  }
}

.Message {
  display: block;
  width: 100%;
  max-width: rem(325px);
  min-height: $message-min-height;
  padding: $message-vertical-padding spacing();
  border-radius: 0;
  text-align: left;
  cursor: pointer;
  color: color('ink', 'light');

  &::-moz-focus-inner {
    border: none;
  }
}
