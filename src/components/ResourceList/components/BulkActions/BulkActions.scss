@import '../../variables';

$button-min-height: control-height();
$vertical-padding: ($button-min-height - line-height(body) - rem(2px)) / 2;
$control-vertical-adjustment: rem(-12px);
$control-size: rem(16px);
$bulk-actions-offset-slide-in-start: rem(-40px);
$stacking-order: ( focused: 20 );
$popover-top-adjustment: spacing(extra-tight) / 2;
$chekbox-label-margin: rem(20px); // 48px $handle-width - 16px checkbox / 2 sides + spacing(extra-tight)

$button-min-height: control-height();
$button-vertical-padding: ($button-min-height - line-height(body) - rem(2px)) / 2;

.Button {
  @include text-style-button;
  @include button-base;

  &:not(:first-child) {
    margin-left: -1px;
  }
}

.Group {
  @include text-style-input;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.Group-smallScreen {
    width: 100%;
    display: flex;
    @include breakpoint-after($resource-list-breakpoint-small) {
      display: none;
    }
}

.Group-largeScreen {
  display: none;
  @include breakpoint-after($resource-list-breakpoint-small) {
    display: flex;
  }
}

.ButtonGroup {
  display: flex;
  align-items: center;
  width: 100%;
  flex-wrap: nowrap;
  margin-bottom: spacing(tight);
  margin-top: spacing(tight);
  justify-content: flex-end;
  box-shadow: inset 0 0 0 1px color(sky, dark);
  border-radius: border-radius();

  @include breakpoint-after($resource-list-breakpoint-small) {
    width: auto;
    justify-content: flex-start;
  }

  .Button {
    border-radius: 0;
    white-space: nowrap;

    &:focus {
      z-index: z-index(focused, $stacking-order);
    }

    &:last-child:not(:first-child){
      border-radius: 0 border-radius() border-radius() 0;
    }
  }

  .Button-cancel {
    flex: 0 0 auto;
    border-radius: 0 border-radius() border-radius() 0;
    z-index: 0;
    margin-left: -1px;

    &:focus {
      z-index: 1;
    }
  }
}

.CheckableButton{
  @include text-style-button;
  display: inline-flex;
  align-items: center;
  min-height: $button-min-height;
  min-width: $button-min-height;
  margin: 0;
  padding: $button-vertical-padding spacing();
  line-height: 1;
  cursor: pointer;
  user-select: none;
  text-decoration: none;
  flex: 1 1 0;
  text-align: left;
  background: color(white);
  border: border(dark);
  border-radius: border-radius() 0 0 border-radius();
  border-right-color: transparent;

  @include breakpoint-after($resource-list-breakpoint-small) {
    flex: 0 1 auto;

    &:only-child{
      border-radius: border-radius();
      border: border(dark);
    }
  }

  &:hover,
  &:active {
    border-right-color: transparent;
  }

  &:focus{
    outline: none;
  }

  &.CheckableButton-plain {
    border: border(transparent);
    border-radius: border-radius();
  }

  &.CheckableButton-selectMode {
    @include text-emphasis-subdued;
    font-weight: 600;
  }

  &.CheckableButton-selected {
    color: color(indigo);
    @include breakpoint-after($resource-list-breakpoint-small) {
      border-color: color(sky, dark);
    }
  }
}

.Checkbox {
  pointer-events: none;
  height: $control-size;
  width: $control-size;
  margin-left: (-1 * (spacing(tight) + rem(1px))); // 1px accounts for border
}

.Label {
  margin-left: $chekbox-label-margin;
  flex: 1;
  white-space: nowrap;
}

.Button-select {
  @include text-style-button;
  border-radius: border-radius();

  .Icon {
    @include recolor-icon(color(ink, lightest));
    margin-right: (spacing(tight));
    margin-left: (-1 * spacing(extra-tight));
  }

  @include breakpoint-after($resource-list-breakpoint-small) {
    display: none;
  }
}

.Popover {
  max-height: $button-min-height;
  margin-left: -1px;
}

.ActionContent {
  display: flex;
  align-items: center;
}

.ActionIcon {
  @include recolor-icon(color(ink, lighter));
  display: inline-block;

  &:first-child {
    margin-right: spacing(extra-tight);
  }

  &:last-child {
    margin-left: spacing(extra-tight);

    // This compensates for the disclosure icon, which is substantially
    // inset within the viewbox (and makes it look like there is too much
    // spacing on the right of the button)
    margin-right: -3px;
  }

  &.disabled {
    @include recolor-icon(color(ink, lightest));
  }
}

.Fade {
  will-change: opacity;
  opacity: 1;
  transition: opacity easing() duration();
}

.Fade-appear,
.Fade-enter,
.Fade-exit {
  opacity: 0;
}

.Fade-exit {
  @include breakpoint-after($resource-list-breakpoint-small) {
    transition: none;
  }
}

.Fade-appearing,
.Fade-entering {
  // Safari bug with using opacity 1
  opacity: 0.99;
}

.Slide {
  will-change: transform;
  transform: translateY(0);
  transition: transform easing() duration();
}

.Slide-appear,
.Slide-enter,
.Slide-exit {
  transform: translateX($bulk-actions-offset-slide-in-start);
}

.Slide-appearing,
.Slide-entering {
  transform: translateY(0);
}
